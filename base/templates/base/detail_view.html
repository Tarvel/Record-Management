{% extends 'base.html' %}


{% block title %}
    Record Detail
{% endblock title %}


{% block main %}
<main class="max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-slate-900">Repair Record Details <a href="{% url 'confirmation_page' record.confirmation_token %}" class="text-blue-600 hover:text-blue-300">Test Confirmation</a></h1>
        <p class="mt-1 text-slate-600">Full details for Record #{{record.pk}}</p>
    </div>

    <div class="bg-white rounded-xl shadow-md overflow-hidden">
        
        <div class="p-6">
                <h2 class="text-lg font-semibold text-slate-800 border-b pb-2 mb-4">ICT Logged Information</h2>
                <dl class="space-y-4">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Department</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.department_name}}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Contact Person</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.user_name}}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Hardware</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.hardware_type}}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Complaint</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.nature_of_complaint}}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Action Taken</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.maintenance_action_taken}}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">ICT Personnel</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.ict_personnel.get_full_name}}</dd>
                    </div>
                </dl>
        </div>
        
        {% comment %} Department Confirmation part {% endcomment %}
        <div class="bg-slate-50 p-6 border-t">
            <h2 class="text-lg font-semibold text-slate-800 mb-4">Department Confirmation</h2>

            
            {% if record.is_confirmed %}
                <dl class="space-y-4">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Confirmation Status</dt>
                        <dd class="sm:col-span-2 font-bold text-green-700">Confirmed</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Condition After Repair</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{ record.condition_after_repair }}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Signature</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{ record.signature }}</dd>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-1 sm:gap-4">
                        <dt class="font-medium text-slate-500">Confirmed At</dt>
                        <dd class="sm:col-span-2 text-slate-800">{{record.updated_at|date:"F"}} {{record.updated_at|date:"j" }}, {{record.updated_at|date:"Y" }}, {{record.updated_at|date:"H:i A" }}</dd>
                    </div>
            </dl>
            {% else %}
                
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-r-lg" role="alert">
                <p class="font-bold">Pending Confirmation</p>
                <p class="text-sm">A confirmation link has been sent to the department but has not yet been completed.</p>
            </div>
            {% endif %}
            
            
        </div>
    </div>
</main>
{% endblock main %}
    